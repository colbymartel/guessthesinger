<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="description" content="Guess The Singer - Search for your favorite singer">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Guess The Singer</title>
  <link rel="icon" href="/favicon.ico">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
  font-family: 'Poppins', sans-serif;
  background: url(/images/bg-top.png) no-repeat;
  background-color: white;
  background-size: cover;
  color: #fff;
  padding-bottom: 40px;
  min-height: 100vh;
  text-align: center;
}

    header {
      background-color: #4682b4;
      padding: 20px;
    }
    .header .logo img {
      width: 60%;
      margin: 0 auto;
      display: block;
    }
    h1 {
      margin-top: 40px;
      font-size: 2rem;
      color: #fff;
    }
    .navbar {
  background: #254a6d;
  padding: 15px 0;
  text-align: center;
  box-shadow: inset 0 -2px 6px rgba(255,255,255,0.15);
}
.navbar ul {
  list-style: none;
}
.navbar li {
  display: inline;
  margin: 0 12px;
}
.navbar a {
  color: #fff;
  font-weight: bold;
  font-size: 1.1rem;
  padding: 10px 16px;
  text-decoration: none;
  border-radius: 8px;
  transition: all 0.3s ease;
}
.navbar a:hover,
.navbar a.active {
  background-color: #4682b4;
  border: 2px solid #fff;
  box-shadow: 0 0 12px rgba(255,255,255,0.3);
}

    /* Search Bar */
    .search-container {
      text-align: center;
      margin: 20px;
    }
    .search-wrapper {
  position: relative;
  width: 90%;
  max-width: 500px;
  margin: 30px auto;
}
.search-wrapper input {
  width: 100%;
  padding: 14px 50px 14px 20px;
  font-size: 1.1rem;
  border-radius: 40px;
  border: none;
  box-shadow: 0 4px 15px rgba(0,0,0,0.3);
}
.search-icon {
  position: absolute;
  right: 20px;
  top: 50%;
  transform: translateY(-50%);
  color: #4682b4;
  font-size: 1.3rem;
}
    /* Gallery Grid */
    .gallery {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); /* allow flexible 3 cols */
  gap: 20px;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 10px;
}
@media (max-width: 600px) {
  .gallery {
    grid-template-columns: repeat(2, 1fr);
  }
}

    .gallery-item {
      width: 160px;
      height: 190px;
      background: #fff;
      padding: 10px;
      border-radius: 20px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      text-align: center;
      transition: transform 0.3s ease;
      cursor: pointer;
      /* Ensure consistent sizing even when filtered */
      display: block;
    }
    .gallery-item:hover {
      transform: scale(1.05);
    }
    .gallery-item img {
      width: 100%;
      height: auto;
      border-radius: 10px;
    }
    .singer-name {
  font-weight: bold;
  font-size: 1rem;
  color: #333;
  white-space: nowrap;               /* Prevent wrapping */
  overflow: hidden;                 /* Hide overflow text */
  text-overflow: ellipsis;          /* Show "..." if too long */
  display: block;
  max-width: 100%;
  font-size: clamp(0.7rem, 4vw, 1rem); /* Shrinks text if needed */
}

    /* Popup Overlay */
    .overlay {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 900;
    }
    /* Popup Box */
    .popup {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: #fff;
  border: 2px solid #4682b4;
  border-radius: 10px;
  padding: 20px;
  z-index: 1000;
  text-align: center;
  box-shadow: 0 8px 20px rgba(0,0,0,0.3);
  width: 90%;
  max-width: 400px;
}


    .popup h2 { margin-bottom: 15px; }
    .popup p { margin-bottom: 20px; font-size: 1.1rem; }
    .popup button {
      padding: 10px 20px;
      border: none;
      background: #4682b4;
      color: #fff;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    .popup button:hover { background: #315f85; }
    /* Close "X" Button */
    .popup .close-popup {
      position: absolute;
      top: 10px;
      right: 15px;
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #4682b4;
      cursor: pointer;
      transition: color 0.3s ease;
    }
    .popup .close-popup:hover { color: #ff4d4d; }

.pop-in {
  animation: popIn 0.5s ease-out;
}
@keyframes shake {
  0% { transform: translate(-50%, -50%) translateX(0); }
  25% { transform: translate(-50%, -50%) translateX(-10px); }
  50% { transform: translate(-50%, -50%) translateX(10px); }
  75% { transform: translate(-50%, -50%) translateX(-10px); }
  100% { transform: translate(-50%, -50%) translateX(0); }
}

.shake {
  animation: shake 0.5s ease;
}
.popup.longer.shake {
  animation-duration: 1s !important;
}

/* Confetti styling */
.confetti {
  position: absolute;
  width: 10px;
  height: 10px;
  opacity: 1;
  transform: rotate(0deg);
  border-radius: 2px;
}
@keyframes fall {
  0% { transform: translateY(0) rotate(0deg); opacity: 1; }
  100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
}
.popup h2,
.popup p {
  color: #333;
}
.gallery-item.starred::after {
  content: "⭐";
  position: absolute;
  top: 5px;
  left: 8px;
  font-size: 1.2rem;
  color: gold;
  z-index: 2;
}
.gallery-item {
  position: relative;
}

  </style>
</head>
<body>
  <header class="header">
    <div class="logo">
      <img src="images/SingerLogo.png" alt="Guess the Singer Logo" loading="lazy">
    </div>
  </header>
  
  <div class="search-container">
    <div class="search-wrapper">
      <i class="fas fa-search search-icon"></i>
      <input type="text" id="searchBar" placeholder="Type singer's name...">
     

    </div>
  </div>
  
  <div class="gallery" id="gallery">
    <!-- Gallery items will be generated by JavaScript -->
  </div>
  <div style="margin-top: 20px;">
    <button id="submitGuess" style="
      padding: 12px 24px;
      display: none;
      font-size: 1.1rem;
      border: none;
      border-radius: 30px;
      background-color: #254a6d;
      color: white;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      transition: background 0.3s ease;
    ">Lock In & Submit</button>
  </div>
  
  <!-- Overlay for popups -->
  <div class="overlay" id="overlay"></div>

  <div class="popup" id="celebrationPopup">
    <button class="close-popup" onclick="closePopup()">&times;</button>
    <div id="popupImageContainer"></div>
    <h2 id="popupTitle">Congratulations!</h2>
    <p id="popupMessage">The singer was <strong id="celebrationName">Carrie Underwood</strong>!</p>
    <button onclick="closePopup()">Close</button>
  </div>
  
  <div class="popup" id="failurePopup">
    <button class="close-popup" onclick="closePopup()">&times;</button>
    <div id="popupImageContainer"></div>
    <h2 id="popupTitle">Nope!</h2>
    <p id="popupMessage">Sorry, that's not right.</p>
    <button onclick="closePopup()">Close</button>
  </div>
  <div class="popup" id="confirmPopup">
    <button class="close-popup" onclick="closePopup()">&times;</button>
    <div id="confirmImageContainer" style="margin-bottom: 15px;"></div>
    <h2 id="confirmTitle">What would you like to do?</h2>
    <p id="confirmSingerName"></p>
    <div style="display: flex; justify-content: center; gap: 10px; flex-wrap: wrap;">
      <button onclick="lockInAnswer()">Lock In</button>
      <button onclick="toggleStar()">Star</button>
      <button onclick="removeStar()" id="removeStarBtn" style="display:none;">Remove</button>
    </div>
  </div>
  <div class="popup" id="namePopup">
    <button class="close-popup" onclick="closePopup()">&times;</button>
    <h2>Enter Your Name</h2>
    <input type="text" id="nameInput" placeholder="Your name..." style="padding: 10px; width: 80%; border-radius: 8px; border: 1px solid #ccc; font-size: 1rem;">
    <br><br>
    <button onclick="submitName()" style="padding: 10px 20px; border: none; border-radius: 6px; background-color: #254a6d; color: white; font-weight: bold; cursor: pointer;">Submit</button>
  </div>
  
  
       <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    
    <script>
      // Firebase configuration (replace with your own config)
      const firebaseConfig = {
        apiKey: "AIzaSyD36qSJ8YAPc3A4FL9jlBGlpiWwj530SPQ",
  authDomain: "guessthesinger10.firebaseapp.com",
  databaseURL: "https://guessthesinger10.firebaseio.com",
  projectId: "guessthesinger10",
  storageBucket: "guessthesinger10.firebasestorage.app",
  messagingSenderId: "97201023235",
  appId: "1:97201023235:web:ab111d9acb43ef7d4be136",
  measurementId: "G-3R005HTKEW"
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
// Initialize Firestore
const db = firebase.firestore();

let selectedSinger = null;
let selectedElement = null;
let hasSubmitted = false;
let starredSingers = [];
let playerName = null;

    // Array of singer objects (50 items)
    const singers = [
    { name: "21 Savage", img: "images/21savage.jpg" },
    { name: "Adele", img: "images/adele.jpg" },
    { name: "Alicia Keys", img: "images/aliciakeys.jpg" },
    { name: "Ariana Grande", img: "images/arianagrande.jpg" },
    { name: "Bad Bunny", img: "images/badbunny.jpg" },
    { name: "Benson Boone", img: "images/bensonboone.jpg" },
    { name: "Beyoncé", img: "images/beyonce.jpg" },
    { name: "Billie Eilish", img: "images/billieeilish.jpg" },
  { name: "Bruno Mars", img: "images/brunomars.jpg" },
  { name: "Calvin Harris", img: "images/calvinharris.jpg" },
  { name: "Chris Brown", img: "images/chrisbrown.jpg" },
  { name: "Daddy Yankee", img: "images/daddyyankee.jpg" },
  { name: "Doja Cat", img: "images/dojacat.jpg" },
  { name: "Drake", img: "images/drake.jpg" },
  { name: "Dua Lipa", img: "images/dualipa.jpg" },
  { name: "Ed Sheeran", img: "images/EdSheeran.jpg" },
  { name: "Elton John", img: "images/eltonjohn.jpg" },
  { name: "Eminem", img: "images/eminem.jpg" },
  { name: "Future", img: "images/future.jpg" },
  { name: "Harry Styles", img: "images/harrystyles.jpg" },
  { name: "Hozier", img: "images/hozier.jpg" },
  { name: "Justin Bieber", img: "images/justinbieber.jpg" },
  { name: "Kanye West", img: "images/kanyewest.jpg" },
  { name: "KAROL G", img: "images/karolg.jpg" },
  { name: "Katy Perry", img: "images/katyperry.jpg" },
  { name: "Kendrick Lamar", img: "images/kendricklamar.jpg" },
  { name: "Khalid", img: "images/khalid.jpg" },
  { name: "Lady Gaga", img: "images/ladygaga.jpg" },
  { name: "Lana Del Rey", img: "images/lanadelrey.jpg" },
  { name: "Lil Wayne", img: "images/lilwayne.jpg" },
  { name: "Mariah Carey", img: "images/mariahcarey.jpg" },
  { name: "Michael Bublé", img: "images/michaelbuble.jpg" },
  { name: "Miley Cyrus", img: "images/mileycyrus.jpg" },
  { name: "Nicki Minaj", img: "images/nickiminaj.jpg" },
  { name: "Olivia Rodrigo", img: "images/oliviarodrigo1.jpg" },
  { name: "Pitbull", img: "images/pitbull.jpg" },
  { name: "Playboi Carti", img: "images/playboicarti.jpg" },
  { name: "Post Malone", img: "images/postmalone.jpg" },
  { name: "Rauw Alejandro", img: "images/rauwalejandro.jpg" },
  { name: "Rihanna", img: "images/rihanna.jpg" },
  { name: "ROSÉ", img: "images/rose.jpg" },
  { name: "Sabrina Carpenter", img: "images/sabrina.jpg" },
  { name: "Sam Smith", img: "images/samsmith.jpg" },
  { name: "Shakira", img: "images/shakira.jpg" },
  { name: "Shawn Mendes", img: "images/shawnmendes.jpg" },
  { name: "Sia", img: "images/sia.jpg" },
  { name: "SZA", img: "images/sza.jpg" },
  { name: "Taylor Swift", img: "images/taylorswift.jpg" },
  { name: "The Weeknd", img: "images/theweeknd.jpg" },
  { name: "Travis Scott", img: "images/travisscott.jpg" },
  { name: "Tyler, The Creator", img: "images/tylerthecreator.jpg" },

  { name: "Teddy Swims", img: "images/teddyswims.jpg" },
  { name: "Camila Cabello", img: "images/camilacabello.jpg" },
  { name: "Britney Spears", img: "images/britneyspears.jpg" },
  { name: "Peso Pluma", img: "images/pesopluma.jpg" },
  { name: "The Kid LAROI", img: "images/kidlaroi.jpg" },
  { name: "Kelly Clarkson", img: "images/kellyclarkson.jpg" },
  { name: "Michael Jackson", img: "images/michaeljackson.jpg" },
  { name: "Halsey", img: "images/halsey.jpg" },
  { name: "Kesha", img: "images/kesha.jpg" },
  { name: "Frank Sinatra", img: "images/franksinatra.jpg" },
  { name: "Gracie Abrams", img: "images/gracieabrams.jpg" },
  { name: "XXXTENTACION", img: "images/xxxtentacion.jpg" },
  { name: "Arijit Singh", img: "images/arijitsingh.jpg" },
  { name: "Tate McRae", img: "images/tatemcrae.jpg" },
  { name: "Pritam", img: "images/pritam.jpg" },
  { name: "Chappell Roan", img: "images/chappellroan.png" },
  { name: "Ellie Goulding", img: "images/elliegoulding.jpg" },
  { name: "Dean Martin", img: "images/deanmartin.jpg" },
  { name: "USHER", img: "images/usher.jpg" },
  { name: "Elvis Presley", img: "images/elvispresley.jpg" },
  { name: "Selena Gomez", img: "images/selenagomez.jpg" },
  { name: "Daniel Caesar", img: "images/danielcaesar.png" },
  { name: "Juice WRLD", img: "images/juicewrld.jpg" },
  { name: "Justin Timberlake", img: "images/justintimberlake.jpg" },
  { name: "Gunna", img: "images/gunna.jpg" },
  { name: "Madonna", img: "images/madonna.jpg" },
  { name: "JENNIE", img: "images/jennie.jpg" },
  { name: "Anitta", img: "images/anitta.jpg" },
  { name: "50 Cent", img: "images/50cent.jpg" },
  { name: "Don Toliver", img: "images/dontoliver.jpg" },
  { name: "Bebe Rexha", img: "images/beberexha.jpg" },
  { name: "Ava Max", img: "images/avamax.jpg" },
  { name: "Ne-Yo", img: "images/neyo.jpg" },
  { name: "J. Cole", img: "images/jcole.jpg" },
  { name: "Frank Ocean", img: "images/frankocean.jpg" },
  { name: "A$AP Rocky", img: "images/asaprocky.jpg" },
  { name: "James Arthur", img: "images/jamesarthur.jpg" },
  { name: "Ty Dolla $ign", img: "images/tydollasign.jpg" },
  { name: "Swae Lee", img: "images/swaelee.jpg" },
  { name: "Charlie Puth", img: "images/charlieputh.jpg" },
  { name: "Romeo Santos", img: "images/romeosantos.jpg" },
  { name: "Morgan Wallen", img: "images/morganwallen.jpg" },
  { name: "JAY-Z", img: "images/jayz.jpg" },
  { name: "P!nk", img: "images/pink.jpg" },
  { name: "Pharrell Williams", img: "images/pharrellwilliams.jpg" },
  { name: "Wiz Khalifa", img: "images/wizkhalifa.jpg" },
  { name: "Sean Paul", img: "images/seanpaul.jpg" },
  { name: "Meghan Trainor", img: "images/meghantrainor.jpg" },
  { name: "Kali Uchis", img: "images/kaliuchis.jpg" },
  { name: "Snoop Dogg", img: "images/snoopdogg.jpg" },
  { name: "Flo Rida", img: "images/florida.jpg" },
  { name: "Lil Baby", img: "images/lilbaby.jpg" },
  { name: "Jack Harlow", img: "images/jackharlow.jpg" },
  { name: "Charli xcx", img: "images/charlixcx.jpg" },
  { name: "Lewis Capaldi", img: "images/lewiscapaldi.jpg" },
  { name: "Lil Uzi Vert", img: "images/liluzivert.jpg" },
  { name: "Christina Aguilera", img: "images/christinaaguilera.jpg" },
  { name: "d4vd", img: "images/d4vd.jpg" },
  { name: "Laufey", img: "images/laufey.jpg" },
  { name: "Jason Derulo", img: "images/jasonderulo.jpg" },
  { name: "Whitney Houston", img: "images/whitneyhouston.png" },
  { name: "Steve Lacy", img: "images/stevelacy.jpg" },
  { name: "John Legend", img: "images/johnlegend.jpg" },
  { name: "Trippie Redd", img: "images/trippieredd.jpg" },
  { name: "Mitski", img: "images/mitski.jpg" },
  { name: "Demi Lovato", img: "images/demilovato.jpg" },
  { name: "Vance Joy", img: "images/vancejoy.jpg" },
  { name: "Noah Kahan", img: "images/noahkahan.jpg" },
  { name: "Bruce Springsteen", img: "images/brucespringsteen.jpg" },
  { name: "Macklemore", img: "images/macklemore.jpg" },
  { name: "Sexxy Red", img: "images/sexxyred.jpg" },
  { name: "Megan Thee Stallion", img: "images/megantheestallion.jpg" },
  { name: "Paul McCartney", img: "images/paulmccartney.jpg" },
  { name: "Shaboozey", img: "images/shaboozey.jpg" },
  { name: "Zach Bryan", img: "images/zachbryan.jpg" },
  { name: "John Lennon", img: "images/johnlennon.jpg" },
  { name: "Alan Walker", img: "images/alanwalker.jpg" },
  { name: "Céline Dion", img: "images/celinedion.jpg" },
  { name: "Billy Joel", img: "images/billyjoel.jpg" },
  { name: "Becky G", img: "images/beckyg.jpg" },
  { name: "Robin Schulz", img: "images/robinschulz.jpg" },
  { name: "GloRilla", img: "images/glorilla.jpg" },
  { name: "Young Thug", img: "images/youngthug.jpg" },
  { name: "Cardi B", img: "images/cardib.jpg" },
  { name: "ZAYN", img: "images/zayn.png" },
  { name: "Kodak Black", img: "images/kodakblack.jpg" },
  { name: "ROSALÍA", img: "images/rosalia.jpg" },
  { name: "Dr. Dre", img: "images/drdre.jpg" },
  { name: "Enrique Iglesias", img: "images/enriqueiglesias.jpg" },
  { name: "Gwen Stefani", img: "images/gwenstefani.jpg" },
  { name: "George Michael", img: "images/georgemichael.jpg" },
  { name: "Conan Gray", img: "images/conangray.jpg" },
  { name: "Stevie Wonder", img: "images/steviewonder.jpg" },
  { name: "Central Cee", img: "images/centralcee.jpg" },
  { name: "Tupac", img: "images/tupac.png" },
  { name: "Luke Combs", img: "images/lukecombs.jpg" },
  { name: "JID", img: "images/jid.jpg" },
  { name: "DaBaby", img: "images/dababy.jpg" },
  { name: "G-Eazy", img: "images/geazy.jpg" },
  { name: "Tame Impala", img: "images/tameimpala.jpg" },
  { name: "Zara Larsson", img: "images/zaralarsson.jpg" },
  { name: "Mac Miller", img: "images/macmiller.jpg" },
  { name: "Lil Tecca", img: "images/liltecca.jpg" },
  { name: "Summer Walker", img: "images/summerwalker.jpg" },
  { name: "Childish Gambino", img: "images/childishgambino.jpg" },
  { name: "Brent Faiyaz", img: "images/brentfaiyaz.jpg" },
  { name: "Jennifer Lopez", img: "images/jenniferlopez.jpg" },
  { name: "Calum Scott", img: "images/calumscott.jpg" },
  { name: "Giveon", img: "images/giveon.jpg" },
  { name: "Tyla", img: "images/tyla.jpg" },
  { name: "Myles Smith", img: "images/mylessmith.jpg" },
  { name: "Bryson Tiller", img: "images/brysontiller.jpg" },
  { name: "Avril Lavigne", img: "images/avrillavigne.jpg" },
  { name: "Bob Marley", img: "images/bobmarley.jpg" },
  { name: "Phil Collins", img: "images/philcollins.jpg" },
  { name: "Lil Nas X", img: "images/lilnasx.jpg" },
  { name: "Dolly Parton", img: "images/dollyparton.jpg" },
  { name: "Troye Sivan", img: "images/troyesivan.jpg" },
  { name: "Kid Cudi", img: "images/kidcudi.jpg" },
  { name: "beabadoobee", img: "images/beabadoobee.jpg" },
  { name: "Amy Winehouse", img: "images/amywinehouse.jpg" },
  { name: "Chris Stapleton", img: "images/chrisstapleton.jpg" },
  { name: "Lil Peep", img: "images/lilpeep.jpg" },
  { name: "French Montana", img: "images/frenchmontana.jpg" },
  { name: "Florence Welch", img: "images/florencewelch.jpg" },
  { name: "Marvin Gaye", img: "images/marvingaye.jpg" },
  { name: "Rema", img: "images/rema.jpg" },
  { name: "Joji", img: "images/joji.jpg" },
  { name: "Tyga", img: "images/tyga.jpg" },
  { name: "The Notorious B.I.G.", img: "images/thenotoriousbig.jpg" },
  { name: "Mac DeMarco", img: "images/macdemarco.jpg" },
  { name: "Ruth B.", img: "images/ruthb.jpg" },
  { name: "Offset", img: "images/offset.jpg" },
  { name: "LISA", img: "images/lisa.jpg" },
  { name: "Dominic Fike", img: "images/dominicfike.jpg" },
  { name: "Jessie J", img: "images/jessiej.jpg" },
  { name: "Luis Fonsi", img: "images/luisfonsi.jpg" },
  { name: "NLE Choppa", img: "images/nlechoppa.jpg" },
  { name: "Timbaland", img: "images/timbaland.jpg" },
  { name: "Alec Benjamin", img: "images/alecbenjamin1.jpg" },
  { name: "Lorde", img: "images/lorde.jpg" },
  { name: "Pop Smoke", img: "images/popsmoke.jpg" },
  { name: "Lauv", img: "images/lauv.jpg" },
  { name: "Alessia Cara", img: "images/alessiacara.jpg" },
  { name: "Lil Durk", img: "images/lildurk.jpg" },
  { name: "Polo G", img: "images/polog.jpg" },
  { name: "Clairo", img: "images/clairo.jpg" },
  { name: "Burna Boy", img: "images/burnaboy.jpg" },
  { name: "Baby Keem", img: "images/babykeem.jpg" },
  { name: "Jung Kook", img: "images/jungkook.jpg" },
  { name: "PinkPantheress", img: "images/pinkpantheress.jpg" },
  { name: "JVKE", img: "images/jvke.jpg" },
  { name: "Big Sean", img: "images/bigsean.jpg" },
  { name: "Jelly Roll", img: "images/jellyroll.jpg" },
  { name: "Ella Fitzgerald", img: "images/ellafitzgerald.jpg" },
  { name: "Noah Cyrus", img: "images/noahcyrus.jpg" },
  { name: "Nelly", img: "images/nelly.jpg" },
  { name: "Roddy Ricch", img: "images/roddyricch.jpg" },
  { name: "girl in red", img: "images/girlinred.png" },
  { name: "Julia Michaels", img: "images/juliamichaels.jpg" },
  { name: "Quavo", img: "images/quavo.jpg" },
  { name: "David Kushner", img: "images/davidkushner.jpg" },
  { name: "Cher", img: "images/cher.jpg" },
  { name: "Lil Yachty", img: "images/lilyachty.jpg" },
  { name: "Carly Rae Jepsen", img: "images/carlyraejepsen.jpg" },
  { name: "Omar Courtz", img: "images/omarcourtz.jpg" },
  { name: "B.o.B", img: "images/bob.jpg" },
  { name: "Sean Kingston", img: "images/seankingston.jpg" },
  { name: "Dean Lewis", img: "images/deanlewis.jpg" },
  { name: "Ice Cube", img: "images/icecube.jpg" },
  { name: "John Mayer", img: "images/johnmayer.jpg" },
  { name: "Kehlani", img: "images/kehlani.jpg" },
  { name: "T-Pain", img: "images/tpain.jpg" },
  { name: "Ice Spice", img: "images/icespice.jpg" },
  { name: "David Bowie", img: "images/davidbowie.jpg" },
  { name: "Christina Perri", img: "images/christinaperri.jpg" },
  { name: "Yeat", img: "images/yeat.jpg" },
  { name: "Sade", img: "images/sade.jpg" },
  { name: "Latto", img: "images/latto.jpg" },
  { name: "Madison Beer", img: "images/madisonbeer.jpg" },
  { name: "Kane Brown", img: "images/kanebrown.jpg" },
  { name: "Steve Aoki", img: "images/steveaoki.jpg" },
  { name: "Jeremih", img: "images/jeremih.jpg" },
  { name: "Alex Warren", img: "images/alexwarren.jpg" },
  { name: "A Boogie Wit da Hoodie", img: "images/aboogiewitdahoodie.jpg" },
  { name: "Mike Posner", img: "images/mikeposner.jpg" },
  { name: "blackbear", img: "images/blackbear.jpg" },
  { name: "Tove Lo", img: "images/tovelo.jpg" },
  { name: "mgk", img: "images/mgk.jpg" },
  { name: "Jason Mraz", img: "images/jasonmraz.jpg" },
  { name: "AURORA", img: "images/aurora.jpg" },
  { name: "Ricky Martin", img: "images/rickymartin.jpg" },
  { name: "Lil Tjay", img: "images/liltjay.jpg" },
  { name: "Doechii", img: "images/doechii.jpg" },
  { name: "Gucci Mane", img: "images/guccimane.jpg" },
  { name: "Dave", img: "images/dave.jpg" },
  { name: "Lukas Graham", img: "images/lukasgraham.jpg" },
  { name: "Addison Rae", img: "images/addisonrae.jpg" },
  { name: "Flo Milli", img: "images/flomilli.jpg" },
  { name: "Niall Horan", img: "images/niallhoran.jpg" },
  { name: "NF", img: "images/nf.jpg" },
  { name: "Tinashe", img: "images/tinashe.jpg" },
  { name: "Russ", img: "images/russ.jpg" },
  { name: "Ms. Lauryn Hill", img: "images/mslaurynhill.jpg" },
  { name: "Lenny Kravitz", img: "images/lennykravitz.jpg" },
  { name: "6LACK", img: "images/6lack.jpg" },
  { name: "24kGoldn", img: "images/24kgoldn.jpg" },
  { name: "Zendaya", img: "images/zendaya.jpg" },
  { name: "Jhené Aiko", img: "images/jheneaiko.jpg" },
  { name: "Thomas Rhett", img: "images/thomasrhett.jpg" },
  { name: "Aretha Franklin", img: "images/arethafranklin.jpg" },
  { name: "Montell Fish", img: "images/montellfish.jpg" },
  { name: "iann dior", img: "images/ianndior.jpg" },
  { name: "Phoebe Bridgers", img: "images/phoebebridgers.jpg" },
  { name: "Meek Mill", img: "images/meekmill.jpg" },
  { name: "Mary J. Blige", img: "images/maryjblige.jpg" },
  { name: "Rex Orange County", img: "images/rexorangecounty.jpg" },
  { name: "Johnny Cash", img: "images/johnnycash.jpg" },
  { name: "Chief Keef", img: "images/chiefkeef.jpg" },
  { name: "Melanie Martinez", img: "images/melaniemartinez.jpg" },
  { name: "Rag'n'Bone Man", img: "images/ragnboneman.jpg" },
  { name: "John Denver", img: "images/johndenver.jpg" },
  { name: "Jack Johnson", img: "images/jackjohnson.jpg" },
  { name: "James Blunt", img: "images/jamesblunt.jpg" },
  { name: "Soulja Boy", img: "images/souljaboy.jpg" },
  { name: "Jimin", img: "images/jimin.jpg" },
  { name: "Fergie", img: "images/fergie.jpg" },
  { name: "Moneybagg Yo", img: "images/moneybaggyo.jpg" },
  { name: "Chance Peña", img: "images/chancepena.jpg" },
  { name: "James Bay", img: "images/jamesbay.jpg" },
  { name: "Blake Shelton", img: "images/blakeshelton.jpg" },
  { name: "Busta Rhymes", img: "images/bustarhymes.jpg" },
  { name: "A$AP Ferg", img: "images/aasapferg.jpg" },
  { name: "Bailey Zimmerman", img: "images/baileyzimmerman.jpg" },
  { name: "Tyler Childers", img: "images/tylerchilders.jpg" },
  { name: "H.E.R.", img: "images/her.jpg" },
  { name: "keshi", img: "images/keshi.jpg" },
  { name: "Ray Charles", img: "images/raycharles.jpg" },
  { name: "Carrie Underwood", img: "images/CarrieUnderwood.jpg" },
  { name: "Luke Bryan", img: "images/lukebryan.jpg" },
  { name: "Lionel Richie", img: "images/lionelrichie.jpg" },
  { name: "Nicky Youre", img: "images/nickyyoure.jpg" },
  { name: "Lizzo", img: "images/lizzo.jpg" },
  { name: "Lizzy McAlpine", img: "images/lizzymcalpine.jpg" },
  { name: "Oliver Tree", img: "images/olivertree.png" }
    ];

    const gallery = document.getElementById("gallery");

    // Render gallery: filter by search term; each item is clickable.
    function renderGallery(filterText = "") {
  gallery.innerHTML = "";
  let filteredSingers = singers.filter(singer =>
    singer.name.toLowerCase().includes(filterText.toLowerCase())
  );

  // Sort so starred singers are first
  filteredSingers.sort((a, b) => {
    const aStarred = starredSingers.includes(a.name.toLowerCase());
    const bStarred = starredSingers.includes(b.name.toLowerCase());
    return bStarred - aStarred;
  });

  filteredSingers.forEach(singer => {
    const item = document.createElement("div");
    item.classList.add("gallery-item");
    item.setAttribute("data-singer", singer.name.toLowerCase());
    item.setAttribute("data-img", singer.img);
    if (starredSingers.includes(singer.name.toLowerCase())) {
      item.classList.add("starred");
    }

    item.innerHTML = `
      <img src="${singer.img}" alt="${singer.name}">
      <div class="singer-name">${singer.name}</div>
    `;

    item.addEventListener("click", function () {
  const singerName = this.getAttribute("data-singer");
  const imgPath = this.getAttribute("data-img");
  const isStarred = starredSingers.includes(singerName);
  selectedSinger = singerName; // ✅ Save selected

  showConfirmPopup(singerName, imgPath, isStarred);
});


gallery.appendChild(item);
  });
}

    // Initial render of all singers.
    renderGallery();

    document.getElementById("submitGuess").addEventListener("click", () => {
  if (!selectedSinger || !selectedElement) {
    alert("Please select a singer first!");
    return;
  }

  if (!playerName) {
    showPopup(document.getElementById("namePopup"));
    return;
  }

  lockInAnswer(); // this safely handles all logic
});


    // Search functionality.
    const searchBar = document.getElementById("searchBar");
    searchBar.addEventListener("input", function() {
      renderGallery(this.value);
    });
    let clickCounts = {};
let lastClicked = null;

function showPopup(popupElement) {
  document.getElementById("overlay").style.display = "block";
  popupElement.style.display = "block";
}

function closePopup() {
  document.getElementById("overlay").style.display = "none";
  document.querySelectorAll(".popup").forEach(p => p.style.display = "none");
}

// Lock in and remove handlers (optional: customize behavior)
async function lockInAnswer() {
  if (!selectedSinger || hasSubmitted || !selectedElement) return;

  if (!playerName) {
    closePopup();
    showPopup(document.getElementById("namePopup"));
    return;
  }

  await submitGuessToFirebase();

  hasSubmitted = true;

  // Disable further selections
  document.querySelectorAll(".gallery-item").forEach(el => {
    el.style.pointerEvents = "none";
    el.style.opacity = "0.5";
  });

  // Highlight the selected one
  selectedElement.style.opacity = "1";
  selectedElement.style.border = "4px solid #32CD32";
  selectedElement.style.boxShadow = "0 0 16px #32CD32";

  closePopup();

  const chosenImg = selectedElement.getAttribute("data-img");

}


function toggleStar() {
  if (!lastClicked) return;
  if (!starredSingers.includes(lastClicked)) {
    starredSingers.push(lastClicked);
  }
  closePopup();
  renderGallery(searchBar.value);
}

function removeStar() {
  if (!lastClicked) return;
  starredSingers = starredSingers.filter(name => name !== lastClicked);
  closePopup();
  renderGallery(searchBar.value);
}
function showConfirmPopup(singerName, imgPath, isStarred) {
  lastClicked = singerName;
  selectedSinger = singerName;
  selectedElement = document.querySelector(`[data-singer="${singerName}"]`);

  document.getElementById("confirmSingerName").textContent = singerName;
  document.getElementById("confirmImageContainer").innerHTML = `
    <img src="${imgPath}" alt="${singerName}" style="width: 120px; border-radius: 12px;">
  `;

  document.getElementById("confirmTitle").textContent = isStarred
    ? "Lock in answer or Remove star?"
    : "Lock in or Star this singer?";

  document.getElementById("removeStarBtn").style.display = isStarred ? "inline-block" : "none";
  showPopup(document.getElementById("confirmPopup"));
}


window.addEventListener("load", () => {
  const savedName = localStorage.getItem("playerName");

  if (savedName) {
    playerName = savedName;
    document.getElementById("nameInput").value = savedName;
  } else {
    showPopup(document.getElementById("namePopup"));
  }
});
function submitName() {
  const input = document.getElementById("nameInput").value.trim();
  if (!input) return;

  playerName = input;
  localStorage.setItem("playerName", playerName);
  closePopup();

  hasSubmitted = false;

  if (selectedSinger && selectedElement && !hasSubmitted) {
    submitGuessToFirebase();
  }
}


async function submitGuessToFirebase() {
  if (!selectedSinger || hasSubmitted || !selectedElement) {
    if (!playerName) showPopup(document.getElementById("namePopup"));
    return;
  }

  hasSubmitted = true;

  document.querySelectorAll(".gallery-item").forEach(item => {
    item.style.pointerEvents = "none";
    item.style.opacity = "0.5";
  });

  selectedElement.style.opacity = "1";
  selectedElement.style.border = "4px solid #32CD32";
  selectedElement.style.boxShadow = "0 0 16px #32CD32";

  closePopup();

  try {
    await db.collection("lockedGuesses").doc(playerName).set({
      guess: selectedSinger,
      timestamp: firebase.firestore.FieldValue.serverTimestamp()
    });

    // Optional: Just show a generic confirmation popup
    document.getElementById("celebrationName").textContent = capitalizeName(selectedSinger);
    showPopup(document.getElementById("celebrationPopup"));

  } catch (err) {
    console.error("Error saving guess:", err);
  }
}


  </script>
</body>
</html>
